<!DOCTYPE html>
<html>
<head>
  <!-- PWA manifest -->
  <link rel="manifest" href="manifest.json">

  <!-- Basic theme color (used by Safari/Chrome for UI chrome) -->
  <meta name="theme-color" content="#6155F5">

	<!-- iOS: treat as standalone app when launched from Home Screen -->
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
	<meta name="apple-mobile-web-app-title" content="Magic Cards">

<!-- iOS home-screen icon (PNG, recommended 180x180) -->
<link rel="apple-touch-icon" href="assets/icons/app-icon-192.png">

  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link href="https://fonts.googleapis.com/css2?family=Amaranth:wght@700&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="styles.css">
</head>

<body>

<!-- HOME -->
<div id="screen-home" class="screen active">
  <div class="key-button" onclick="openCodeScreen()">
    <img id="icon-key">
  </div>

  <div class="header-logo-wrap">
    <img id="header-logo" class="header-logo">
  </div>

  <div id="cardStack" class="card-stack" onclick="onSpin()">
    <div class="card" id="card-1"></div>
    <div class="card" id="card-2"></div>
    <div class="card" id="card-3"></div>
  </div>
</div>

<!-- SELECTION (3 PROMPTS) -->
<div id="screen-select" class="screen">
  <div class="selection-hint-top">tap to select</div>

  <div class="selection-cards" id="selectionCards">
    <div class="prompt-card selection-card" data-index="0" onclick="choosePrompt(0)">
      <div class="prompt-tag"></div>
      <div class="prompt-text"></div>
    </div>
    <div class="prompt-card selection-card" data-index="1" onclick="choosePrompt(1)">
      <div class="prompt-tag"></div>
      <div class="prompt-text"></div>
    </div>
    <div class="prompt-card selection-card" data-index="2" onclick="choosePrompt(2)">
      <div class="prompt-tag"></div>
      <div class="prompt-text"></div>
    </div>
  </div>

  <div class="selection-reshuffle" onclick="reshuffleSelection()">
    <div class="selection-reshuffle-icon-wrap">
      <img id="icon-reshuffle">
    </div>
    <div class="selection-reshuffle-label">reshuffle</div>
  </div>
</div>

<!-- VIEW (FULL PROMPT) -->
<div
  id="screen-view"
  class="screen"
  ontouchstart="onViewTouchStart(event)"
  ontouchmove="onViewTouchMove(event)"
  ontouchend="onViewTouchEnd(event)"
>
  <div class="view-inner" id="view-inner">
    <div class="view-tag" id="view-tag"></div>
    <div class="view-text" id="view-text"></div>
    <div class="view-done-wrap" onclick="finishPrompt()">
      <div class="view-done-icon">
        <img id="icon-swipe">
      </div>
      <div class="view-done-label">swipe up to finish</div>
    </div>
  </div>
</div>

<!-- HISTORY -->
<div id="screen-history" class="screen">
  <!-- Top export icon (centered) -->
  <div class="history-header">
    <div class="history-export-wrap" id="history-export-wrap" onclick="exportHistory()">
      <div class="history-export-icon">
        <img id="icon-export">
      </div>
      <div class="history-export-label">export</div>
    </div>

    <!-- Clear all pill (floats toward bottom of list; hidden if 0/1 items) -->
    <button id="history-clear-all" class="history-clear-btn" onclick="confirmClearAll()">
      CLEAR ALL
    </button>
  </div>

  <!-- Empty state -->
  <div id="history-empty" class="history-empty">
    <div class="history-empty-message">No prompts yet</div>
    <button class="history-empty-btn" onclick="switchScreen('home')">
      Add One Now
    </button>
  </div>

  <!-- List of history cards -->
  <div id="history-list" class="history-list">
    <!-- cards will be rendered here -->
  </div>
</div>

<!-- TAP TO SHUFFLE (HOME ONLY) -->
<div class="shuffle-control" onclick="onSpin()">
  <div class="shuffle-icon">â†‘</div>
  <div class="shuffle-label">tap to shuffle</div>
</div>

<!-- BOTTOM NAV -->
<div class="bottom-nav">
  <div class="nav-item nav-item-active" data-screen="home" onclick="switchScreen('home')">
    <img id="icon-home" class="nav-icon"><div>Home</div>
  </div>
  <div class="nav-item" data-screen="history" onclick="switchScreen('history')">
    <img id="icon-history" class="nav-icon"><div>History</div>
  </div>
</div>

<!-- TOAST -->
<div id="toast" class="toast"></div>

<!-- CONFIRM MODAL -->
<div id="confirm-modal" class="confirm-modal">
  <div class="confirm-dialog">
    <div id="confirm-message" class="confirm-message"></div>
    <div class="confirm-buttons">
      <button class="confirm-btn cancel" onclick="cancelConfirm()">Cancel</button>
      <button class="confirm-btn danger" id="confirm-ok" onclick="confirmOk()">Delete</button>
    </div>
  </div>
</div>
<div id="whiteTransition" class="white-transition"></div>

  <!-- Load app logic -->
  <script src="app.js"></script>
</body>
</html>